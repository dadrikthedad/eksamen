2025-12-16 13:07:54.967 +01:00 [INF] Now listening on: http://localhost:5031
2025-12-16 13:07:55.034 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-16 13:07:55.036 +01:00 [INF] Hosting environment: Development
2025-12-16 13:07:55.037 +01:00 [INF] Content root path: C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav
2025-12-16 13:08:06.595 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/ - null null
2025-12-16 13:08:06.653 +01:00 [INF] HTTP GET / responded 404 in 1.3945 ms
2025-12-16 13:08:06.709 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/ - 404 0 null 116.1463ms
2025-12-16 13:08:06.745 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5031/, Response status code: 404
2025-12-16 13:08:17.674 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/ - null null
2025-12-16 13:08:17.689 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/ - 301 0 null 15.2755ms
2025-12-16 13:08:17.703 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/index.html - null null
2025-12-16 13:08:17.841 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/index.html - 200 null text/html;charset=utf-8 137.5474ms
2025-12-16 13:08:17.941 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui.css - null null
2025-12-16 13:08:17.949 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui-bundle.js - null null
2025-12-16 13:08:17.953 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui-standalone-preset.js - null null
2025-12-16 13:08:17.999 +01:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-12-16 13:08:18.032 +01:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-12-16 13:08:18.033 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui.css - 200 152034 text/css 91.399ms
2025-12-16 13:08:18.042 +01:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-12-16 13:08:18.050 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 96.8967ms
2025-12-16 13:08:18.056 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 107.1183ms
2025-12-16 13:08:18.471 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/favicon-16x16.png - null null
2025-12-16 13:08:18.474 +01:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-12-16 13:08:18.479 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/favicon-16x16.png - 200 665 image/png 8.582ms
2025-12-16 13:08:18.550 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/v1/swagger.json - null null
2025-12-16 13:08:18.766 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 215.987ms
2025-12-16 13:10:18.989 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/10 - null null
2025-12-16 13:10:18.997 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:10:19.050 +01:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:10:19.349 +01:00 [INF] GetBookById called with id 10
2025-12-16 13:10:20.969 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-16 13:10:21.042 +01:00 [INF] Book FredrikMageeEmne7Arbkrav.Models.Book retrieved successfully
2025-12-16 13:10:21.047 +01:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse'.
2025-12-16 13:10:21.093 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 2036.0831ms
2025-12-16 13:10:21.095 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:10:21.097 +01:00 [INF] HTTP GET /api/Books/10 responded 200 in 2100.8104 ms
2025-12-16 13:10:21.111 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/10 - 200 null application/json; charset=utf-8 2121.485ms
2025-12-16 13:11:26.666 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books - null null
2025-12-16 13:11:26.829 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:11:26.907 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:11:26.944 +01:00 [INF] Getting all books. Payload: {"title":null,"author":null,"publicationYear":null,"isbn":null,"inStock":null}
2025-12-16 13:11:27.092 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
2025-12-16 13:11:27.096 +01:00 [INF] Retrieved 19 books from the database successfully
2025-12-16 13:11:27.100 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-16 13:11:27.138 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 212.156ms
2025-12-16 13:11:27.169 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:11:27.180 +01:00 [INF] HTTP GET /api/Books responded 200 in 351.7083 ms
2025-12-16 13:11:27.194 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books - 200 null application/json; charset=utf-8 527.7225ms
2025-12-16 13:11:36.217 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books?title=ring - null null
2025-12-16 13:11:36.226 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:11:36.230 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:11:36.264 +01:00 [INF] Getting all books. Payload: {"title":"ring","author":null,"publicationYear":null,"isbn":null,"inStock":null}
2025-12-16 13:11:36.526 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE instr(lower("b"."Title"), @__ToLower_0) > 0
2025-12-16 13:11:36.531 +01:00 [INF] Retrieved 1 books from the database successfully
2025-12-16 13:11:36.533 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-16 13:11:36.536 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 302.8542ms
2025-12-16 13:11:36.546 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:11:36.548 +01:00 [INF] HTTP GET /api/Books responded 200 in 321.7840 ms
2025-12-16 13:11:36.555 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books?title=ring - 200 null application/json; charset=utf-8 337.8217ms
2025-12-16 13:11:44.208 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 127
2025-12-16 13:11:44.212 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:11:44.223 +01:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.Requests.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:11:44.314 +01:00 [INF] CreateBook called with CreateBookRequest {"Title":"Rødhette og ulven","Author":"Bestemor","PublicationYear":2010,"ISBN":"REDHOOD2010","InStock":3,"$type":"CreateBookRequest"}
2025-12-16 13:11:44.744 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 8), @p1='?' (Size = 11), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-12-16 13:11:44.784 +01:00 [INF] Book created successfully with ID 24
2025-12-16 13:11:44.787 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse'.
2025-12-16 13:11:44.828 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 601.5644ms
2025-12-16 13:11:44.834 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:11:44.836 +01:00 [INF] HTTP POST /api/Books responded 201 in 623.7301 ms
2025-12-16 13:11:44.847 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 201 null application/json; charset=utf-8 638.7011ms
2025-12-16 13:11:49.705 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/instock - null null
2025-12-16 13:11:49.710 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooksInStock (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:11:49.722 +01:00 [INF] Route matched with {action = "GetBooksInStock", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooksInStock() on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:11:49.730 +01:00 [INF] Getting all books in stock
2025-12-16 13:11:49.754 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."InStock" > 0
2025-12-16 13:11:49.770 +01:00 [INF] Retrieved 15 books in stock from the database successfully
2025-12-16 13:11:49.775 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-16 13:11:49.778 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooksInStock (FredrikMageeEmne7Arbkrav) in 51.4966ms
2025-12-16 13:11:49.781 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooksInStock (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:11:49.784 +01:00 [INF] HTTP GET /api/Books/instock responded 200 in 75.1376 ms
2025-12-16 13:11:49.788 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/instock - 200 null application/json; charset=utf-8 82.5144ms
2025-12-16 13:12:22.649 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books?title=er - null null
2025-12-16 13:12:22.653 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:12:22.655 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:12:22.659 +01:00 [INF] Getting all books. Payload: {"title":"er","author":null,"publicationYear":null,"isbn":null,"inStock":null}
2025-12-16 13:12:22.671 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 2)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE instr(lower("b"."Title"), @__ToLower_0) > 0
2025-12-16 13:12:22.674 +01:00 [INF] Retrieved 9 books from the database successfully
2025-12-16 13:12:22.676 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-16 13:12:22.678 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 20.2317ms
2025-12-16 13:12:22.681 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:12:22.683 +01:00 [INF] HTTP GET /api/Books responded 200 in 30.2436 ms
2025-12-16 13:12:22.685 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books?title=er - 200 null application/json; charset=utf-8 36.6607ms
2025-12-16 13:12:33.193 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books?title=ar - null null
2025-12-16 13:12:33.197 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:12:33.199 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:12:33.203 +01:00 [INF] Getting all books. Payload: {"title":"ar","author":null,"publicationYear":null,"isbn":null,"inStock":null}
2025-12-16 13:12:33.214 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 2)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE instr(lower("b"."Title"), @__ToLower_0) > 0
2025-12-16 13:12:33.218 +01:00 [INF] Retrieved 1 books from the database successfully
2025-12-16 13:12:33.220 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-16 13:12:33.223 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 20.493ms
2025-12-16 13:12:33.225 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:12:33.228 +01:00 [INF] HTTP GET /api/Books responded 200 in 30.9216 ms
2025-12-16 13:12:33.233 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books?title=ar - 200 null application/json; charset=utf-8 39.904ms
2025-12-16 13:12:41.697 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books?author=amsun - null null
2025-12-16 13:12:41.702 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:12:41.705 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:12:41.709 +01:00 [INF] Getting all books. Payload: {"title":null,"author":"amsun","publicationYear":null,"isbn":null,"inStock":null}
2025-12-16 13:12:41.730 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE instr(lower("b"."Author"), @__ToLower_0) > 0
2025-12-16 13:12:41.735 +01:00 [INF] Retrieved 2 books from the database successfully
2025-12-16 13:12:41.737 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-16 13:12:41.739 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 31.5336ms
2025-12-16 13:12:41.741 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:12:41.745 +01:00 [INF] HTTP GET /api/Books responded 200 in 43.0843 ms
2025-12-16 13:12:41.751 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books?author=amsun - 200 null application/json; charset=utf-8 54.2615ms
2025-12-16 13:13:03.418 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books - null null
2025-12-16 13:13:03.422 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:03.424 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:13:03.428 +01:00 [INF] Getting all books. Payload: {"title":null,"author":null,"publicationYear":null,"isbn":null,"inStock":null}
2025-12-16 13:13:03.436 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
2025-12-16 13:13:03.458 +01:00 [INF] Retrieved 20 books from the database successfully
2025-12-16 13:13:03.460 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-16 13:13:03.463 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 36.3744ms
2025-12-16 13:13:03.465 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:03.477 +01:00 [INF] HTTP GET /api/Books responded 200 in 55.0059 ms
2025-12-16 13:13:03.480 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books - 200 null application/json; charset=utf-8 62.2667ms
2025-12-16 13:13:12.847 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/instock - null null
2025-12-16 13:13:12.850 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooksInStock (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:12.853 +01:00 [INF] Route matched with {action = "GetBooksInStock", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooksInStock() on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:13:12.856 +01:00 [INF] Getting all books in stock
2025-12-16 13:13:12.861 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."InStock" > 0
2025-12-16 13:13:12.865 +01:00 [INF] Retrieved 15 books in stock from the database successfully
2025-12-16 13:13:12.868 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-16 13:13:12.870 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooksInStock (FredrikMageeEmne7Arbkrav) in 14.6022ms
2025-12-16 13:13:12.874 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooksInStock (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:12.876 +01:00 [INF] HTTP GET /api/Books/instock responded 200 in 25.7822 ms
2025-12-16 13:13:12.879 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/instock - 200 null application/json; charset=utf-8 32.2753ms
2025-12-16 13:13:20.407 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 127
2025-12-16 13:13:20.413 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:20.415 +01:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.Requests.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:13:20.424 +01:00 [INF] CreateBook called with CreateBookRequest {"Title":"Rødhette og ulven","Author":"Bestemor","PublicationYear":2010,"ISBN":"REDHOOD2010","InStock":3,"$type":"CreateBookRequest"}
2025-12-16 13:13:20.470 +01:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (Size = 8), @p1='?' (Size = 11), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-12-16 13:13:20.579 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'FredrikMageeEmne7Arbkrav.Data.BookDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-16 13:13:20.680 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 261.5504ms
2025-12-16 13:13:20.692 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:20.726 +01:00 [ERR] HTTP POST /api/Books responded 500 in 314.5201 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 76
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 90
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-16 13:13:20.887 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 76
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 90
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-16 13:13:20.952 +01:00 [ERR] GlobalExceptionHandler: Exception occurred: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 76
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 90
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-16 13:13:21.036 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 409 null application/json; charset=utf-8 628.9109ms
2025-12-16 13:13:28.189 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 128
2025-12-16 13:13:28.193 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:28.196 +01:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.Requests.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:13:28.202 +01:00 [INF] CreateBook called with CreateBookRequest {"Title":"Rødhette og ulven","Author":"Bestemor","PublicationYear":2010,"ISBN":"REDHOOD20210","InStock":3,"$type":"CreateBookRequest"}
2025-12-16 13:13:28.259 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 8), @p1='?' (Size = 12), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-12-16 13:13:28.307 +01:00 [INF] Book created successfully with ID 25
2025-12-16 13:13:28.311 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse'.
2025-12-16 13:13:28.325 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 125.8267ms
2025-12-16 13:13:28.336 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:28.339 +01:00 [INF] HTTP POST /api/Books responded 201 in 146.0879 ms
2025-12-16 13:13:28.342 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 201 null application/json; charset=utf-8 153.0009ms
2025-12-16 13:13:35.618 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/10 - null null
2025-12-16 13:13:35.623 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:35.625 +01:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:13:35.629 +01:00 [INF] GetBookById called with id 10
2025-12-16 13:13:35.637 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-16 13:13:35.641 +01:00 [INF] Book FredrikMageeEmne7Arbkrav.Models.Book retrieved successfully
2025-12-16 13:13:35.643 +01:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse'.
2025-12-16 13:13:35.644 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 16.8802ms
2025-12-16 13:13:35.646 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:35.662 +01:00 [INF] HTTP GET /api/Books/10 responded 200 in 39.5122 ms
2025-12-16 13:13:35.712 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/10 - 200 null application/json; charset=utf-8 93.3609ms
2025-12-16 13:13:42.038 +01:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5031/api/Books/10 - application/json 19
2025-12-16 13:13:42.044 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:42.064 +01:00 [INF] Route matched with {action = "UpdateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateBook(Int32, FredrikMageeEmne7Arbkrav.DTOs.Requests.UpdateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:13:42.086 +01:00 [INF] UpdateBook called with UpdateBookRequest {"Title":null,"Author":null,"PublicationYear":null,"ISBN":null,"InStock":10,"$type":"UpdateBookRequest"}
2025-12-16 13:13:42.096 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-16 13:13:42.163 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Books" SET "InStock" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-12-16 13:13:42.239 +01:00 [INF] Successfully updated book with Id: 10
2025-12-16 13:13:42.307 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-16 13:13:42.330 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav) in 261.8249ms
2025-12-16 13:13:42.344 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:42.346 +01:00 [INF] HTTP PUT /api/Books/10 responded 204 in 301.8912 ms
2025-12-16 13:13:42.358 +01:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5031/api/Books/10 - 204 null null 319.9316ms
2025-12-16 13:13:51.125 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/10 - null null
2025-12-16 13:13:51.129 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:51.134 +01:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:13:51.158 +01:00 [INF] GetBookById called with id 10
2025-12-16 13:13:51.196 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-16 13:13:51.232 +01:00 [INF] Book FredrikMageeEmne7Arbkrav.Models.Book retrieved successfully
2025-12-16 13:13:51.235 +01:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse'.
2025-12-16 13:13:51.238 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 81.4561ms
2025-12-16 13:13:51.259 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:51.263 +01:00 [INF] HTTP GET /api/Books/10 responded 200 in 133.0951 ms
2025-12-16 13:13:51.266 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/10 - 200 null application/json; charset=utf-8 140.6059ms
2025-12-16 13:13:56.523 +01:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5031/api/Books/24 - null null
2025-12-16 13:13:56.529 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.DeleteBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:56.539 +01:00 [INF] Route matched with {action = "DeleteBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteBook(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:13:56.558 +01:00 [INF] DeleteBook called with 24
2025-12-16 13:13:56.562 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-16 13:13:56.599 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Books"
WHERE "Id" = @p0
RETURNING 1;
2025-12-16 13:13:56.646 +01:00 [INF] Successfully deleted book with Id: 24
2025-12-16 13:13:56.654 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-16 13:13:56.662 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.DeleteBook (FredrikMageeEmne7Arbkrav) in 114.791ms
2025-12-16 13:13:56.666 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.DeleteBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:13:56.671 +01:00 [INF] HTTP DELETE /api/Books/24 responded 204 in 142.1237 ms
2025-12-16 13:13:56.683 +01:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5031/api/Books/24 - 204 null null 160.1257ms
2025-12-16 13:14:36.340 +01:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5031/api/Books/25 - null null
2025-12-16 13:14:36.344 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.DeleteBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:14:36.346 +01:00 [INF] Route matched with {action = "DeleteBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteBook(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:14:36.349 +01:00 [INF] DeleteBook called with 25
2025-12-16 13:14:36.352 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-16 13:14:36.359 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Books"
WHERE "Id" = @p0
RETURNING 1;
2025-12-16 13:14:36.364 +01:00 [INF] Successfully deleted book with Id: 25
2025-12-16 13:14:36.365 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-16 13:14:36.367 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.DeleteBook (FredrikMageeEmne7Arbkrav) in 18.2676ms
2025-12-16 13:14:36.370 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.DeleteBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:14:36.372 +01:00 [INF] HTTP DELETE /api/Books/25 responded 204 in 27.7544 ms
2025-12-16 13:14:36.374 +01:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5031/api/Books/25 - 204 null null 34.4962ms
2025-12-16 13:18:53.652 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books - null null
2025-12-16 13:18:53.661 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:18:53.667 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:18:53.673 +01:00 [INF] Getting all books. Payload: {"title":null,"author":null,"publicationYear":null,"isbn":null,"inStock":null}
2025-12-16 13:18:53.681 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
2025-12-16 13:18:53.684 +01:00 [INF] Retrieved 19 books from the database successfully
2025-12-16 13:18:53.687 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-16 13:18:53.693 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 21.3181ms
2025-12-16 13:18:53.696 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:18:53.697 +01:00 [INF] HTTP GET /api/Books responded 200 in 36.2164 ms
2025-12-16 13:18:53.701 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books - 200 null application/json; charset=utf-8 48.4973ms
2025-12-16 13:19:00.847 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books?author=amsun - null null
2025-12-16 13:19:00.853 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:00.857 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:19:00.864 +01:00 [INF] Getting all books. Payload: {"title":null,"author":"amsun","publicationYear":null,"isbn":null,"inStock":null}
2025-12-16 13:19:00.876 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__ToLower_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE instr(lower("b"."Author"), @__ToLower_0) > 0
2025-12-16 13:19:00.879 +01:00 [INF] Retrieved 2 books from the database successfully
2025-12-16 13:19:00.881 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-16 13:19:00.883 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 19.5548ms
2025-12-16 13:19:00.885 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:00.887 +01:00 [INF] HTTP GET /api/Books responded 200 in 33.6737 ms
2025-12-16 13:19:00.890 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books?author=amsun - 200 null application/json; charset=utf-8 42.4523ms
2025-12-16 13:19:06.536 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books?title=peter&author=amsun - null null
2025-12-16 13:19:06.544 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:06.547 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:19:06.553 +01:00 [INF] Getting all books. Payload: {"title":"peter","author":"amsun","publicationYear":null,"isbn":null,"inStock":null}
2025-12-16 13:19:06.582 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToLower_0='?' (Size = 5), @__ToLower_1='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE instr(lower("b"."Title"), @__ToLower_0) > 0 AND instr(lower("b"."Author"), @__ToLower_1) > 0
2025-12-16 13:19:06.597 +01:00 [INF] Retrieved 1 books from the database successfully
2025-12-16 13:19:06.599 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-16 13:19:06.602 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 50.5456ms
2025-12-16 13:19:06.604 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:06.605 +01:00 [INF] HTTP GET /api/Books responded 200 in 61.8168 ms
2025-12-16 13:19:06.614 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books?title=peter&author=amsun - 200 null application/json; charset=utf-8 77.8427ms
2025-12-16 13:19:11.035 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 128
2025-12-16 13:19:11.038 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:11.040 +01:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.Requests.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:19:11.043 +01:00 [INF] CreateBook called with CreateBookRequest {"Title":"Rødhette og ulven","Author":"Bestemor","PublicationYear":2010,"ISBN":"REDHOOD20210","InStock":3,"$type":"CreateBookRequest"}
2025-12-16 13:19:11.055 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 8), @p1='?' (Size = 12), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-12-16 13:19:11.073 +01:00 [INF] Book created successfully with ID 26
2025-12-16 13:19:11.075 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse'.
2025-12-16 13:19:11.078 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 35.3715ms
2025-12-16 13:19:11.089 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:11.098 +01:00 [INF] HTTP POST /api/Books responded 201 in 59.0776 ms
2025-12-16 13:19:11.106 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 201 null application/json; charset=utf-8 70.3028ms
2025-12-16 13:19:15.524 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/instock - null null
2025-12-16 13:19:15.528 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooksInStock (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:15.529 +01:00 [INF] Route matched with {action = "GetBooksInStock", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooksInStock() on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:19:15.536 +01:00 [INF] Getting all books in stock
2025-12-16 13:19:15.540 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."InStock" > 0
2025-12-16 13:19:15.543 +01:00 [INF] Retrieved 15 books in stock from the database successfully
2025-12-16 13:19:15.545 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-16 13:19:15.551 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooksInStock (FredrikMageeEmne7Arbkrav) in 18.0333ms
2025-12-16 13:19:15.558 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooksInStock (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:15.575 +01:00 [INF] HTTP GET /api/Books/instock responded 200 in 47.2614 ms
2025-12-16 13:19:15.578 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/instock - 200 null application/json; charset=utf-8 53.9384ms
2025-12-16 13:19:24.007 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/26 - null null
2025-12-16 13:19:24.010 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:24.012 +01:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:19:24.015 +01:00 [INF] GetBookById called with id 26
2025-12-16 13:19:24.025 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-16 13:19:24.039 +01:00 [INF] Book FredrikMageeEmne7Arbkrav.Models.Book retrieved successfully
2025-12-16 13:19:24.041 +01:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse'.
2025-12-16 13:19:24.043 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 28.804ms
2025-12-16 13:19:24.045 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:24.046 +01:00 [INF] HTTP GET /api/Books/26 responded 200 in 36.1009 ms
2025-12-16 13:19:24.057 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/26 - 200 null application/json; charset=utf-8 48.9699ms
2025-12-16 13:19:31.413 +01:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5031/api/Books/26 - application/json 19
2025-12-16 13:19:31.416 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:31.418 +01:00 [INF] Route matched with {action = "UpdateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateBook(Int32, FredrikMageeEmne7Arbkrav.DTOs.Requests.UpdateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:19:31.423 +01:00 [INF] UpdateBook called with UpdateBookRequest {"Title":null,"Author":null,"PublicationYear":null,"ISBN":null,"InStock":10,"$type":"UpdateBookRequest"}
2025-12-16 13:19:31.430 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-16 13:19:31.436 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Books" SET "InStock" = @p0
WHERE "Id" = @p1
RETURNING 1;
2025-12-16 13:19:31.461 +01:00 [INF] Successfully updated book with Id: 26
2025-12-16 13:19:31.463 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-16 13:19:31.465 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav) in 44.4361ms
2025-12-16 13:19:31.469 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:31.475 +01:00 [INF] HTTP PUT /api/Books/26 responded 204 in 58.4208 ms
2025-12-16 13:19:31.478 +01:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5031/api/Books/26 - 204 null null 64.789ms
2025-12-16 13:19:38.996 +01:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5031/api/Books/26 - null null
2025-12-16 13:19:39.001 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.DeleteBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:39.004 +01:00 [INF] Route matched with {action = "DeleteBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteBook(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:19:39.009 +01:00 [INF] DeleteBook called with 26
2025-12-16 13:19:39.013 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-16 13:19:39.017 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Books"
WHERE "Id" = @p0
RETURNING 1;
2025-12-16 13:19:39.027 +01:00 [INF] Successfully deleted book with Id: 26
2025-12-16 13:19:39.029 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-16 13:19:39.030 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.DeleteBook (FredrikMageeEmne7Arbkrav) in 21.8195ms
2025-12-16 13:19:39.032 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.DeleteBook (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:39.034 +01:00 [INF] HTTP DELETE /api/Books/26 responded 204 in 33.0730 ms
2025-12-16 13:19:39.043 +01:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5031/api/Books/26 - 204 null null 46.2684ms
2025-12-16 13:19:43.565 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/26 - null null
2025-12-16 13:19:43.569 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:43.570 +01:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-16 13:19:43.574 +01:00 [INF] GetBookById called with id 26
2025-12-16 13:19:43.577 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-16 13:19:43.582 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 9.5365ms
2025-12-16 13:19:43.585 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-16 13:19:43.587 +01:00 [ERR] HTTP GET /api/Books/26 responded 500 in 17.8749 ms
System.Collections.Generic.KeyNotFoundException: Book with Id 26 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 70
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-16 13:19:43.601 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Collections.Generic.KeyNotFoundException: Book with Id 26 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 70
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-16 13:19:43.619 +01:00 [ERR] GlobalExceptionHandler: Exception occurred: Book with Id 26 not found
System.Collections.Generic.KeyNotFoundException: Book with Id 26 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 70
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-16 13:19:43.630 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/26 - 404 null application/json; charset=utf-8 65.2929ms
2025-12-16 19:57:25.495 +01:00 [INF] Application is shutting down...
