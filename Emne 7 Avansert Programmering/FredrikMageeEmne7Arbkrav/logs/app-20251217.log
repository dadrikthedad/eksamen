2025-12-17 11:54:54.093 +01:00 [INF] Now listening on: http://localhost:5031
2025-12-17 11:54:54.145 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-17 11:54:54.148 +01:00 [INF] Hosting environment: Development
2025-12-17 11:54:54.150 +01:00 [INF] Content root path: C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav
2025-12-17 11:54:56.765 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/ - null null
2025-12-17 11:54:57.363 +01:00 [INF] HTTP GET / responded 404 in 1.3388 ms
2025-12-17 11:54:57.380 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/ - 404 0 null 618.3244ms
2025-12-17 11:54:57.428 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5031/, Response status code: 404
2025-12-17 11:55:08.586 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swgger - null null
2025-12-17 11:55:08.593 +01:00 [INF] HTTP GET /swgger responded 404 in 0.0843 ms
2025-12-17 11:55:08.596 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swgger - 404 0 null 11.1512ms
2025-12-17 11:55:08.602 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5031/swgger, Response status code: 404
2025-12-17 11:55:13.946 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger - null null
2025-12-17 11:55:13.956 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger - 301 0 null 9.7431ms
2025-12-17 11:55:13.968 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/index.html - null null
2025-12-17 11:55:14.106 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/index.html - 200 null text/html;charset=utf-8 138.0717ms
2025-12-17 11:55:14.236 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui-standalone-preset.js - null null
2025-12-17 11:55:14.236 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui.css - null null
2025-12-17 11:55:14.284 +01:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-12-17 11:55:14.284 +01:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-12-17 11:55:14.285 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui.css - 499 152034 text/css 49.1101ms
2025-12-17 11:55:14.288 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui-standalone-preset.js - 499 230280 text/javascript 51.2679ms
2025-12-17 11:55:14.566 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/favicon-16x16.png - null null
2025-12-17 11:55:14.572 +01:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-12-17 11:55:14.582 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/favicon-16x16.png - 499 665 image/png 15.9195ms
2025-12-17 11:55:14.669 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/v1/swagger.json - null null
2025-12-17 11:55:14.915 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 246.2372ms
2025-12-17 11:58:45.589 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books - null null
2025-12-17 11:58:45.624 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:58:45.738 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 11:58:45.997 +01:00 [INF] Getting all books. Payload: {"title":null,"author":null,"publicationYear":null,"isbn":null,"inStock":null}
2025-12-17 11:58:47.825 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
2025-12-17 11:58:47.855 +01:00 [INF] Retrieved 19 books from the database successfully
2025-12-17 11:58:47.865 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-17 11:58:47.944 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 2193.8316ms
2025-12-17 11:58:47.947 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:58:47.949 +01:00 [INF] HTTP GET /api/Books responded 200 in 2326.4974 ms
2025-12-17 11:58:47.964 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books - 200 null application/json; charset=utf-8 2374.5705ms
2025-12-17 11:58:57.102 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books?author=amsun - null null
2025-12-17 11:58:57.108 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:58:57.114 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 11:58:57.165 +01:00 [INF] Getting all books. Payload: {"title":null,"author":"amsun","publicationYear":null,"isbn":null,"inStock":null}
2025-12-17 11:58:57.587 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__ToLower_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE instr(lower("b"."Author"), @__ToLower_0) > 0
2025-12-17 11:58:57.591 +01:00 [INF] Retrieved 2 books from the database successfully
2025-12-17 11:58:57.594 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-17 11:58:57.597 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 478.1832ms
2025-12-17 11:58:57.599 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:58:57.601 +01:00 [INF] HTTP GET /api/Books responded 200 in 492.9533 ms
2025-12-17 11:58:57.606 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books?author=amsun - 200 null application/json; charset=utf-8 504.0446ms
2025-12-17 11:59:06.936 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books?title=peter&author=amsun - null null
2025-12-17 11:59:06.939 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:06.941 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 11:59:06.968 +01:00 [INF] Getting all books. Payload: {"title":"peter","author":"amsun","publicationYear":null,"isbn":null,"inStock":null}
2025-12-17 11:59:07.255 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToLower_0='?' (Size = 5), @__ToLower_1='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE instr(lower("b"."Title"), @__ToLower_0) > 0 AND instr(lower("b"."Author"), @__ToLower_1) > 0
2025-12-17 11:59:07.266 +01:00 [INF] Retrieved 1 books from the database successfully
2025-12-17 11:59:07.268 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-17 11:59:07.269 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 320.9247ms
2025-12-17 11:59:07.271 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:07.272 +01:00 [INF] HTTP GET /api/Books responded 200 in 333.0713 ms
2025-12-17 11:59:07.282 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books?title=peter&author=amsun - 200 null application/json; charset=utf-8 345.5807ms
2025-12-17 11:59:11.219 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/instock - null null
2025-12-17 11:59:11.227 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooksInStock (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:11.238 +01:00 [INF] Route matched with {action = "GetBooksInStock", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooksInStock() on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 11:59:11.242 +01:00 [INF] Getting all books in stock
2025-12-17 11:59:11.295 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."InStock" > 0
2025-12-17 11:59:11.306 +01:00 [INF] Retrieved 14 books in stock from the database successfully
2025-12-17 11:59:11.322 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-17 11:59:11.332 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooksInStock (FredrikMageeEmne7Arbkrav) in 91.3514ms
2025-12-17 11:59:11.342 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooksInStock (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:11.346 +01:00 [INF] HTTP GET /api/Books/instock responded 200 in 118.3437 ms
2025-12-17 11:59:11.350 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/instock - 200 null application/json; charset=utf-8 130.7153ms
2025-12-17 11:59:19.571 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 126
2025-12-17 11:59:19.574 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:19.586 +01:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.Requests.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 11:59:19.714 +01:00 [INF] CreateBook called with CreateBookRequest {"Title":"Test Tittel","Author":"Test Forfatter","PublicationYear":2026,"ISBN":"TESTBOK2026","InStock":3,"$type":"CreateBookRequest"}
2025-12-17 11:59:20.212 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 14), @p1='?' (Size = 11), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-12-17 11:59:20.266 +01:00 [INF] Book created successfully with ID 27
2025-12-17 11:59:20.270 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse'.
2025-12-17 11:59:20.310 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 720.8863ms
2025-12-17 11:59:20.313 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:20.321 +01:00 [INF] HTTP POST /api/Books responded 201 in 746.4464 ms
2025-12-17 11:59:20.324 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 201 null application/json; charset=utf-8 752.4541ms
2025-12-17 11:59:26.343 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 126
2025-12-17 11:59:26.348 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:26.357 +01:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.Requests.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 11:59:26.369 +01:00 [INF] CreateBook called with CreateBookRequest {"Title":"Test Tittel","Author":"Test Forfatter","PublicationYear":2026,"ISBN":"TESTBOK2026","InStock":3,"$type":"CreateBookRequest"}
2025-12-17 11:59:26.393 +01:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='?' (Size = 14), @p1='?' (Size = 11), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-12-17 11:59:26.489 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'FredrikMageeEmne7Arbkrav.Data.BookDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-17 11:59:26.686 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 323.7287ms
2025-12-17 11:59:26.691 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:26.693 +01:00 [ERR] HTTP POST /api/Books responded 500 in 345.0420 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 76
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 90
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-17 11:59:26.865 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 76
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 90
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-17 11:59:27.316 +01:00 [ERR] GlobalExceptionHandler: Exception occurred: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 76
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 90
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 82
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-17 11:59:27.411 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 409 null application/json; charset=utf-8 1066.8018ms
2025-12-17 11:59:36.261 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/27 - null null
2025-12-17 11:59:36.265 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:36.275 +01:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 11:59:36.283 +01:00 [INF] GetBookById called with id 27
2025-12-17 11:59:36.443 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-17 11:59:36.506 +01:00 [INF] Book FredrikMageeEmne7Arbkrav.Models.Book retrieved successfully
2025-12-17 11:59:36.550 +01:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse'.
2025-12-17 11:59:36.552 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 273.3648ms
2025-12-17 11:59:36.586 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:36.595 +01:00 [INF] HTTP GET /api/Books/27 responded 200 in 330.1394 ms
2025-12-17 11:59:36.599 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/27 - 200 null application/json; charset=utf-8 337.3288ms
2025-12-17 11:59:45.759 +01:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5031/api/Books/27 - application/json 48
2025-12-17 11:59:45.763 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:45.787 +01:00 [INF] Route matched with {action = "UpdateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateBook(Int32, FredrikMageeEmne7Arbkrav.DTOs.Requests.UpdateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 11:59:45.807 +01:00 [INF] UpdateBook called with UpdateBookRequest {"Title":"Ny Test Tittel","Author":null,"PublicationYear":null,"ISBN":null,"InStock":10,"$type":"UpdateBookRequest"}
2025-12-17 11:59:45.860 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-17 11:59:45.966 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Books" SET "InStock" = @p0, "Title" = @p1
WHERE "Id" = @p2
RETURNING 1;
2025-12-17 11:59:46.177 +01:00 [INF] Successfully updated book with Id: 27
2025-12-17 11:59:46.202 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-17 11:59:46.204 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav) in 414.627ms
2025-12-17 11:59:46.206 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:46.208 +01:00 [INF] HTTP PUT /api/Books/27 responded 204 in 444.8176 ms
2025-12-17 11:59:46.219 +01:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5031/api/Books/27 - 204 null null 460.0249ms
2025-12-17 11:59:53.196 +01:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5031/api/Books/27 - application/json 31
2025-12-17 11:59:53.200 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:53.205 +01:00 [INF] Route matched with {action = "UpdateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateBook(Int32, FredrikMageeEmne7Arbkrav.DTOs.Requests.UpdateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 11:59:53.210 +01:00 [INF] UpdateBook called with UpdateBookRequest {"Title":"Ny Test Tittel","Author":null,"PublicationYear":null,"ISBN":null,"InStock":null,"$type":"UpdateBookRequest"}
2025-12-17 11:59:53.222 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-17 11:59:53.225 +01:00 [INF] Successfully updated book with Id: 27
2025-12-17 11:59:53.226 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-17 11:59:53.227 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav) in 19.8884ms
2025-12-17 11:59:53.229 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:53.231 +01:00 [INF] HTTP PUT /api/Books/27 responded 204 in 31.0481 ms
2025-12-17 11:59:53.239 +01:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5031/api/Books/27 - 204 null null 43.5866ms
2025-12-17 11:59:58.455 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/27 - null null
2025-12-17 11:59:58.458 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:58.460 +01:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 11:59:58.463 +01:00 [INF] GetBookById called with id 27
2025-12-17 11:59:58.471 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-17 11:59:58.476 +01:00 [INF] Book FredrikMageeEmne7Arbkrav.Models.Book retrieved successfully
2025-12-17 11:59:58.479 +01:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse'.
2025-12-17 11:59:58.491 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 28.5935ms
2025-12-17 11:59:58.496 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-17 11:59:58.505 +01:00 [INF] HTTP GET /api/Books/27 responded 200 in 46.7756 ms
2025-12-17 11:59:58.511 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/27 - 200 null application/json; charset=utf-8 56.171ms
2025-12-17 12:00:05.273 +01:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5031/api/Books/27 - null null
2025-12-17 12:00:05.277 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.DeleteBook (FredrikMageeEmne7Arbkrav)'
2025-12-17 12:00:05.286 +01:00 [INF] Route matched with {action = "DeleteBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteBook(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 12:00:05.295 +01:00 [INF] DeleteBook called with 27
2025-12-17 12:00:05.306 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-17 12:00:05.353 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Books"
WHERE "Id" = @p0
RETURNING 1;
2025-12-17 12:00:05.375 +01:00 [INF] Successfully deleted book with Id: 27
2025-12-17 12:00:05.416 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-17 12:00:05.422 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.DeleteBook (FredrikMageeEmne7Arbkrav) in 130.6578ms
2025-12-17 12:00:05.424 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.DeleteBook (FredrikMageeEmne7Arbkrav)'
2025-12-17 12:00:05.426 +01:00 [INF] HTTP DELETE /api/Books/27 responded 204 in 149.7351 ms
2025-12-17 12:00:05.430 +01:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5031/api/Books/27 - 204 null null 157.1797ms
2025-12-17 12:00:10.197 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/27 - null null
2025-12-17 12:00:10.200 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-17 12:00:10.203 +01:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 12:00:10.208 +01:00 [INF] GetBookById called with id 27
2025-12-17 12:00:10.212 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-12-17 12:00:10.216 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 9.5634ms
2025-12-17 12:00:10.220 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-12-17 12:00:10.222 +01:00 [ERR] HTTP GET /api/Books/27 responded 500 in 21.8934 ms
System.Collections.Generic.KeyNotFoundException: Book with Id 27 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 70
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-12-17 12:00:10.241 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.Collections.Generic.KeyNotFoundException: Book with Id 27 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 70
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-17 12:00:10.254 +01:00 [ERR] GlobalExceptionHandler: Exception occurred: Book with Id 27 not found
System.Collections.Generic.KeyNotFoundException: Book with Id 27 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 70
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\OneDrive\Dokumenter\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-17 12:00:10.401 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/27 - 404 null application/json; charset=utf-8 204.2073ms
2025-12-17 12:57:01.278 +01:00 [INF] Now listening on: http://localhost:5031
2025-12-17 12:57:01.298 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-17 12:57:01.298 +01:00 [INF] Hosting environment: Development
2025-12-17 12:57:01.299 +01:00 [INF] Content root path: C:\Users\fredr\Documents\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav
2025-12-17 12:57:03.558 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/ - null null
2025-12-17 12:57:03.581 +01:00 [INF] HTTP GET / responded 404 in 0.4114 ms
2025-12-17 12:57:03.588 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/ - 404 0 null 31.2447ms
2025-12-17 12:57:03.594 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5031/, Response status code: 404
2025-12-17 12:57:08.139 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/ - null null
2025-12-17 12:57:08.143 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/ - 301 0 null 4.6817ms
2025-12-17 12:57:08.148 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/index.html - null null
2025-12-17 12:57:08.198 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/index.html - 200 null text/html;charset=utf-8 50.4609ms
2025-12-17 12:57:08.345 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/v1/swagger.json - null null
2025-12-17 12:57:08.409 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 64.7154ms
2025-12-17 12:57:14.530 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books - null null
2025-12-17 12:57:14.533 +01:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-17 12:57:14.548 +01:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-12-17 12:57:14.638 +01:00 [INF] Getting all books. Payload: {"title":null,"author":null,"publicationYear":null,"isbn":null,"inStock":null}
2025-12-17 12:57:15.123 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
2025-12-17 12:57:15.133 +01:00 [INF] Retrieved 19 books from the database successfully
2025-12-17 12:57:15.137 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Request.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-17 12:57:15.161 +01:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 610.2872ms
2025-12-17 12:57:15.162 +01:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-12-17 12:57:15.162 +01:00 [INF] HTTP GET /api/Books responded 200 in 629.5584 ms
2025-12-17 12:57:15.167 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books - 200 null application/json; charset=utf-8 636.9963ms
