2025-10-16 22:41:20.120 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-10-16 22:41:20.142 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-16 22:41:20.145 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-10-16 22:41:20.148 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-10-16 22:41:20.150 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-10-16 20:41:20.1494254+00:00');
SELECT changes();
2025-10-16 22:41:20.178 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-10-16 22:41:20.184 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-16 22:41:20.185 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-16 22:41:20.191 +02:00 [INF] Applying migration '20251016204053_CreationOfDatabase'.
2025-10-16 22:41:20.195 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Books" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Books" PRIMARY KEY AUTOINCREMENT,
    "Title" TEXT NOT NULL,
    "Author" TEXT NOT NULL,
    "PublicationYear" INTEGER NOT NULL,
    "ISBN" TEXT NOT NULL,
    "InStock" INTEGER NOT NULL
);
2025-10-16 22:41:20.196 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20251016204053_CreationOfDatabase', '9.0.10');
2025-10-16 22:41:20.199 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-10-16 22:41:52.962 +02:00 [INF] Now listening on: http://localhost:5031
2025-10-16 22:41:52.980 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-16 22:41:52.981 +02:00 [INF] Hosting environment: Development
2025-10-16 22:41:52.981 +02:00 [INF] Content root path: C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav
2025-10-16 22:42:07.003 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/ - null null
2025-10-16 22:42:07.022 +02:00 [INF] HTTP GET / responded 404 in 0.4345 ms
2025-10-16 22:42:07.031 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/ - 404 0 null 29.1408ms
2025-10-16 22:42:07.034 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5031/, Response status code: 404
2025-10-16 22:42:10.027 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/ - null null
2025-10-16 22:42:10.031 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/ - 301 0 null 4.3007ms
2025-10-16 22:42:10.035 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/index.html - null null
2025-10-16 22:42:10.076 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/index.html - 200 null text/html;charset=utf-8 40.7113ms
2025-10-16 22:42:10.094 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui.css - null null
2025-10-16 22:42:10.100 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-10-16 22:42:10.101 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui.css - 499 152034 text/css 7.7327ms
2025-10-16 22:42:10.193 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/favicon-16x16.png - null null
2025-10-16 22:42:10.195 +02:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-10-16 22:42:10.195 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/favicon-16x16.png - 499 665 image/png 2.6334ms
2025-10-16 22:42:10.227 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/v1/swagger.json - null null
2025-10-16 22:42:10.281 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 54.5454ms
2025-10-16 22:42:13.852 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books - null null
2025-10-16 22:42:13.855 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-10-16 22:42:13.871 +02:00 [INF] Route matched with {action = "GetBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBooks(System.String, System.String, System.Nullable`1[System.Int32], System.String, System.Nullable`1[System.Int32]) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 22:42:14.349 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
2025-10-16 22:42:14.356 +02:00 [INF] We retrieved 0 books from the database successfully
2025-10-16 22:42:14.359 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse, FredrikMageeEmne7Arbkrav, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-16 22:42:14.377 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav) in 504.0526ms
2025-10-16 22:42:14.378 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBooks (FredrikMageeEmne7Arbkrav)'
2025-10-16 22:42:14.379 +02:00 [INF] HTTP GET /api/Books responded 200 in 524.0985 ms
2025-10-16 22:42:14.382 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books - 200 null application/json; charset=utf-8 529.8593ms
2025-10-16 22:43:20.296 +02:00 [INF] Application is shutting down...
2025-10-16 22:43:54.391 +02:00 [INF] Now listening on: http://localhost:5031
2025-10-16 22:43:54.409 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-16 22:43:54.410 +02:00 [INF] Hosting environment: Development
2025-10-16 22:43:54.410 +02:00 [INF] Content root path: C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav
2025-10-16 22:43:55.760 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/ - null null
2025-10-16 22:43:55.780 +02:00 [INF] HTTP GET / responded 404 in 0.3070 ms
2025-10-16 22:43:55.784 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/ - 404 0 null 24.2672ms
2025-10-16 22:43:55.788 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5031/, Response status code: 404
2025-10-16 22:44:01.828 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/ - null null
2025-10-16 22:44:01.832 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/ - 301 0 null 4.309ms
2025-10-16 22:44:01.837 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/index.html - null null
2025-10-16 22:44:01.875 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/index.html - 200 null text/html;charset=utf-8 38.2077ms
2025-10-16 22:44:01.897 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui.css - null null
2025-10-16 22:44:01.904 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-10-16 22:44:01.905 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/swagger-ui.css - 499 152034 text/css 7.9672ms
2025-10-16 22:44:02.006 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/swagger/v1/swagger.json - null null
2025-10-16 22:44:02.053 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.933ms
2025-10-16 22:44:12.859 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 157
2025-10-16 22:44:12.861 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 22:44:12.873 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 22:44:12.947 +02:00 [INF] CreateBook called with UpdateBookRequest {"Title":"Ringenes Sverre","Author":"Jay Ar Ar Tulkien","PublicationYear":1916,"ISBN":"RSJRR12328","InStock":8,"$type":"CreateBookRequest"}
2025-10-16 22:44:13.222 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 17), @p1='?' (Size = 10), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-16 22:44:13.245 +02:00 [INF] Book created successfully with ID 1
2025-10-16 22:44:13.247 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 22:44:13.261 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 384.9053ms
2025-10-16 22:44:13.262 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 22:44:13.262 +02:00 [INF] HTTP POST /api/Books responded 201 in 401.4157 ms
2025-10-16 22:44:13.267 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 201 null application/json; charset=utf-8 408.0442ms
2025-10-16 22:47:27.610 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 144
2025-10-16 22:47:27.612 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 22:47:27.612 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 22:47:27.615 +02:00 [INF] CreateBook called with UpdateBookRequest {"Title":"Ringenes Sverre","Author":"Jay Ar Ar Tulkien","PublicationYear":1916,"ISBN":"RSJRR12328","InStock":8,"$type":"CreateBookRequest"}
2025-10-16 22:47:27.655 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 17), @p1='?' (Size = 10), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-16 22:47:27.658 +02:00 [INF] Book created successfully with ID 2
2025-10-16 22:47:27.659 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 22:47:27.660 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 46.8757ms
2025-10-16 22:47:27.661 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 22:47:27.661 +02:00 [INF] HTTP POST /api/Books responded 201 in 49.6545 ms
2025-10-16 22:47:27.662 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 201 null application/json; charset=utf-8 52.2183ms
2025-10-16 22:52:35.179 +02:00 [INF] Application is shutting down...
2025-10-16 22:52:54.347 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-10-16 22:52:54.370 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-16 22:52:54.373 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2025-10-16 22:52:54.376 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2025-10-16 22:52:54.378 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2025-10-16 20:52:54.3776354+00:00');
SELECT changes();
2025-10-16 22:52:54.403 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2025-10-16 22:52:54.408 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2025-10-16 22:52:54.410 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-16 22:52:54.416 +02:00 [INF] Applying migration '20251016205248_CreationOfDatabase'.
2025-10-16 22:52:54.420 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Books" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Books" PRIMARY KEY AUTOINCREMENT,
    "Title" TEXT NOT NULL,
    "Author" TEXT NOT NULL,
    "PublicationYear" INTEGER NOT NULL,
    "ISBN" TEXT NOT NULL,
    "InStock" INTEGER NOT NULL
);
2025-10-16 22:52:54.422 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Books_ISBN" ON "Books" ("ISBN");
2025-10-16 22:52:54.422 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20251016205248_CreationOfDatabase', '9.0.10');
2025-10-16 22:52:54.425 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2025-10-16 22:53:01.322 +02:00 [INF] Now listening on: http://localhost:5031
2025-10-16 22:53:01.340 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-16 22:53:01.341 +02:00 [INF] Hosting environment: Development
2025-10-16 22:53:01.341 +02:00 [INF] Content root path: C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav
2025-10-16 22:53:19.413 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 144
2025-10-16 22:53:19.429 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 22:53:19.443 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 22:53:19.526 +02:00 [INF] CreateBook called with UpdateBookRequest {"Title":"Ringenes Sverre","Author":"Jay Ar Ar Tulkien","PublicationYear":1916,"ISBN":"RSJRR12328","InStock":8,"$type":"CreateBookRequest"}
2025-10-16 22:53:19.819 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 17), @p1='?' (Size = 10), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-16 22:53:19.837 +02:00 [INF] Book created successfully with ID 1
2025-10-16 22:53:19.840 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 22:53:19.859 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 412.1262ms
2025-10-16 22:53:19.860 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 22:53:19.862 +02:00 [INF] HTTP POST /api/Books responded 201 in 432.7488 ms
2025-10-16 22:53:19.866 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 201 null application/json; charset=utf-8 453.8254ms
2025-10-16 22:53:24.502 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 144
2025-10-16 22:53:24.504 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 22:53:24.505 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 22:53:24.507 +02:00 [INF] CreateBook called with UpdateBookRequest {"Title":"Ringenes Sverre","Author":"Jay Ar Ar Tulkien","PublicationYear":1916,"ISBN":"RSJRR12328","InStock":8,"$type":"CreateBookRequest"}
2025-10-16 22:53:24.544 +02:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (Size = 17), @p1='?' (Size = 10), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-16 22:53:24.555 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'FredrikMageeEmne7Arbkrav.Data.BookDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-16 22:53:24.562 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 56.4843ms
2025-10-16 22:53:24.563 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 22:53:24.564 +02:00 [ERR] HTTP POST /api/Books responded 500 in 59.5525 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 78
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 74
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-16 22:53:24.581 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 78
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 74
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 22:53:24.588 +02:00 [ERR] Unhandled exception: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 78
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 74
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 22:53:24.605 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 500 null application/json; charset=utf-8 103.1254ms
2025-10-16 23:01:50.301 +02:00 [INF] Application is shutting down...
2025-10-16 23:01:52.767 +02:00 [INF] Now listening on: http://localhost:5031
2025-10-16 23:01:52.786 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-16 23:01:52.786 +02:00 [INF] Hosting environment: Development
2025-10-16 23:01:52.787 +02:00 [INF] Content root path: C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav
2025-10-16 23:03:44.702 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 144
2025-10-16 23:03:44.718 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:03:44.732 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:03:44.817 +02:00 [INF] CreateBook called with UpdateBookRequest {"Title":"Ringenes Sverre","Author":"Jay Ar Ar Tulkien","PublicationYear":1916,"ISBN":"RSJRR12328","InStock":8,"$type":"CreateBookRequest"}
2025-10-16 23:03:45.095 +02:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (Size = 17), @p1='?' (Size = 10), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-16 23:03:45.106 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'FredrikMageeEmne7Arbkrav.Data.BookDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-16 23:03:45.115 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 380.5089ms
2025-10-16 23:03:45.117 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:03:45.118 +02:00 [ERR] HTTP POST /api/Books responded 500 in 400.4344 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 78
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 74
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-16 23:03:45.135 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 78
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 74
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:03:45.142 +02:00 [ERR] Unhandled exception: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 78
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 74
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:03:45.168 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 409 null application/json; charset=utf-8 467.0866ms
2025-10-16 23:04:00.291 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 129
2025-10-16 23:04:00.293 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:04:00.294 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:04:00.299 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-16 23:04:00.314 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 19.3772ms
2025-10-16 23:04:00.315 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:04:00.316 +02:00 [INF] HTTP POST /api/Books responded 400 in 22.6747 ms
2025-10-16 23:04:00.317 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 400 null application/problem+json; charset=utf-8 26.2974ms
2025-10-16 23:04:08.222 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 130
2025-10-16 23:04:08.224 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:04:08.225 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:04:08.229 +02:00 [INF] CreateBook called with UpdateBookRequest {"Title":"J","Author":"Jay Ar Ar Tulkien","PublicationYear":1916,"ISBN":"RSJRR12328","InStock":8,"$type":"CreateBookRequest"}
2025-10-16 23:04:08.265 +02:00 [ERR] Failed executing DbCommand (0ms) [Parameters=[@p0='?' (Size = 17), @p1='?' (Size = 10), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 1)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-16 23:04:08.268 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'FredrikMageeEmne7Arbkrav.Data.BookDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-16 23:04:08.272 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 46.4509ms
2025-10-16 23:04:08.273 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:04:08.274 +02:00 [ERR] HTTP POST /api/Books responded 500 in 49.4903 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 78
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 74
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-16 23:04:08.280 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 78
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 74
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:04:08.286 +02:00 [ERR] Unhandled exception: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.CreateBookAsync(Book book) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 78
   at FredrikMageeEmne7Arbkrav.Services.BooksService.CreateBookAsync(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 74
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook(CreateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:04:08.291 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 409 null application/json; charset=utf-8 69.5199ms
2025-10-16 23:04:17.915 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 132
2025-10-16 23:04:17.916 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:04:17.917 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:04:17.918 +02:00 [INF] CreateBook called with UpdateBookRequest {"Title":"J","Author":"Jay Ar Ar Tulkien","PublicationYear":1916,"ISBN":"RSJRR1232812","InStock":8,"$type":"CreateBookRequest"}
2025-10-16 23:04:17.929 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 17), @p1='?' (Size = 12), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 1)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-16 23:04:17.947 +02:00 [INF] Book created successfully with ID 2
2025-10-16 23:04:17.948 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:04:17.957 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 39.1453ms
2025-10-16 23:04:17.958 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:04:17.959 +02:00 [INF] HTTP POST /api/Books responded 201 in 42.2071 ms
2025-10-16 23:04:17.960 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 201 null application/json; charset=utf-8 44.8184ms
2025-10-16 23:05:36.556 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 120
2025-10-16 23:05:36.557 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:05:36.558 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:05:36.559 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-16 23:05:36.560 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 1.2853ms
2025-10-16 23:05:36.561 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:05:36.561 +02:00 [INF] HTTP POST /api/Books responded 400 in 4.1834 ms
2025-10-16 23:05:36.562 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 400 null application/problem+json; charset=utf-8 6.7492ms
2025-10-16 23:48:01.116 +02:00 [INF] Now listening on: http://localhost:5031
2025-10-16 23:48:01.134 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-16 23:48:01.134 +02:00 [INF] Hosting environment: Development
2025-10-16 23:48:01.135 +02:00 [INF] Content root path: C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav
2025-10-16 23:48:01.743 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 115
2025-10-16 23:48:01.763 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:48:01.778 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:48:01.877 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-16 23:48:01.904 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 123.9432ms
2025-10-16 23:48:01.907 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:48:01.908 +02:00 [INF] HTTP POST /api/Books responded 400 in 146.0512 ms
2025-10-16 23:48:01.911 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 400 null application/problem+json; charset=utf-8 168.8328ms
2025-10-16 23:48:11.114 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 121
2025-10-16 23:48:11.116 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:48:11.117 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:48:11.122 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-16 23:48:11.122 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 4.536ms
2025-10-16 23:48:11.123 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:48:11.124 +02:00 [INF] HTTP POST /api/Books responded 400 in 7.6318 ms
2025-10-16 23:48:11.125 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 400 null application/problem+json; charset=utf-8 11.0471ms
2025-10-16 23:48:22.903 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 790
2025-10-16 23:48:22.905 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:48:22.905 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:48:22.911 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-16 23:48:22.911 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 5.1066ms
2025-10-16 23:48:22.912 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:48:22.913 +02:00 [INF] HTTP POST /api/Books responded 400 in 7.8315 ms
2025-10-16 23:48:22.914 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 400 null application/problem+json; charset=utf-8 10.8356ms
2025-10-16 23:48:54.259 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 782
2025-10-16 23:48:54.260 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:48:54.261 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:48:54.263 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-16 23:48:54.263 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 1.349ms
2025-10-16 23:48:54.264 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:48:54.265 +02:00 [INF] HTTP POST /api/Books responded 400 in 4.3518 ms
2025-10-16 23:48:54.266 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 400 null application/problem+json; charset=utf-8 6.7571ms
2025-10-16 23:49:08.630 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 782
2025-10-16 23:49:08.632 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:49:08.632 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:49:08.634 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-16 23:49:08.635 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 1.3609ms
2025-10-16 23:49:08.635 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:49:08.636 +02:00 [INF] HTTP POST /api/Books responded 400 in 4.2791 ms
2025-10-16 23:49:08.637 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 400 null application/problem+json; charset=utf-8 6.7119ms
2025-10-16 23:49:17.425 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 108
2025-10-16 23:49:17.427 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:49:17.427 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:49:17.431 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-16 23:49:17.432 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 3.1518ms
2025-10-16 23:49:17.432 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:49:17.433 +02:00 [INF] HTTP POST /api/Books responded 400 in 6.0969 ms
2025-10-16 23:49:17.434 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 400 null application/problem+json; charset=utf-8 8.4843ms
2025-10-16 23:49:31.996 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 136
2025-10-16 23:49:31.998 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:49:31.998 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:49:32.000 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-16 23:49:32.001 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 1.8725ms
2025-10-16 23:49:32.002 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:49:32.002 +02:00 [INF] HTTP POST /api/Books responded 400 in 4.8549 ms
2025-10-16 23:49:32.003 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 400 null application/problem+json; charset=utf-8 7.2746ms
2025-10-16 23:49:52.312 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 135
2025-10-16 23:49:52.314 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:49:52.315 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:49:52.316 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-16 23:49:52.317 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 1.26ms
2025-10-16 23:49:52.318 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:49:52.318 +02:00 [INF] HTTP POST /api/Books responded 400 in 4.2588 ms
2025-10-16 23:49:52.319 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 400 null application/problem+json; charset=utf-8 6.6061ms
2025-10-16 23:49:58.470 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 135
2025-10-16 23:49:58.471 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:49:58.472 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:49:58.473 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-16 23:49:58.474 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 1.2617ms
2025-10-16 23:49:58.475 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:49:58.476 +02:00 [INF] HTTP POST /api/Books responded 400 in 4.3120 ms
2025-10-16 23:49:58.477 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 400 null application/problem+json; charset=utf-8 7.219ms
2025-10-16 23:50:02.908 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 135
2025-10-16 23:50:02.910 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:50:02.910 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:50:02.913 +02:00 [INF] CreateBook called with UpdateBookRequest {"Title":"Test the Book","Author":"Geir Writerman","PublicationYear":2025,"ISBN":"BOK123","InStock":8,"$type":"CreateBookRequest"}
2025-10-16 23:50:03.218 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 14), @p1='?' (Size = 6), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 13)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-16 23:50:03.240 +02:00 [INF] Book created successfully with ID 3
2025-10-16 23:50:03.241 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:50:03.252 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 340.9869ms
2025-10-16 23:50:03.253 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:50:03.254 +02:00 [INF] HTTP POST /api/Books responded 201 in 344.1805 ms
2025-10-16 23:50:03.257 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 201 null application/json; charset=utf-8 349.1268ms
2025-10-16 23:50:40.361 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5031/api/Books - application/json 153
2025-10-16 23:50:40.362 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:50:40.363 +02:00 [INF] Route matched with {action = "CreateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBook(FredrikMageeEmne7Arbkrav.DTOs.CreateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:50:40.364 +02:00 [INF] CreateBook called with UpdateBookRequest {"Title":"Den mest populre boken","Author":"Nils Skriveguri","PublicationYear":2023,"ISBN":"BESTBOK31","InStock":-130,"$type":"CreateBookRequest"}
2025-10-16 23:50:40.397 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 15), @p1='?' (Size = 9), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 23)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Books" ("Author", "ISBN", "InStock", "PublicationYear", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-16 23:50:40.400 +02:00 [INF] Book created successfully with ID 4
2025-10-16 23:50:40.401 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:50:40.402 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav) in 38.3175ms
2025-10-16 23:50:40.403 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.CreateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:50:40.403 +02:00 [INF] HTTP POST /api/Books responded 201 in 41.1486 ms
2025-10-16 23:50:40.404 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5031/api/Books - 201 null application/json; charset=utf-8 43.519ms
2025-10-16 23:50:52.462 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/1 - null null
2025-10-16 23:50:52.468 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:50:52.473 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:50:52.475 +02:00 [INF] GetBookById called with id 1
2025-10-16 23:50:52.609 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:50:52.615 +02:00 [INF] Book 1, Ringenes Sverre retrieved successfully
2025-10-16 23:50:52.616 +02:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:50:52.616 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 142.6567ms
2025-10-16 23:50:52.617 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:50:52.618 +02:00 [INF] HTTP GET /api/Books/1 responded 200 in 149.6984 ms
2025-10-16 23:50:52.619 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/1 - 200 null application/json; charset=utf-8 157.2655ms
2025-10-16 23:51:04.630 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/1990 - null null
2025-10-16 23:51:04.632 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:51:04.632 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:51:04.633 +02:00 [INF] GetBookById called with id 1990
2025-10-16 23:51:04.637 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:51:04.639 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 5.5956ms
2025-10-16 23:51:04.640 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:51:04.641 +02:00 [ERR] HTTP GET /api/Books/1990 responded 500 in 8.8163 ms
System.Collections.Generic.KeyNotFoundException: Book with Id 1990 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 55
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-16 23:51:04.663 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Collections.Generic.KeyNotFoundException: Book with Id 1990 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 55
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:51:04.667 +02:00 [ERR] Unhandled exception: Book with Id 1990 not found
System.Collections.Generic.KeyNotFoundException: Book with Id 1990 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 55
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:51:04.675 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/1990 - 404 null application/json; charset=utf-8 44.4422ms
2025-10-16 23:51:11.448 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/1990 - null null
2025-10-16 23:51:11.449 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:51:11.450 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:51:11.451 +02:00 [INF] GetBookById called with id 1990
2025-10-16 23:51:11.453 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:51:11.454 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 2.9806ms
2025-10-16 23:51:11.455 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:51:11.455 +02:00 [ERR] HTTP GET /api/Books/1990 responded 500 in 6.0121 ms
System.Collections.Generic.KeyNotFoundException: Book with Id 1990 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 55
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-16 23:51:11.459 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Collections.Generic.KeyNotFoundException: Book with Id 1990 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 55
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:51:11.461 +02:00 [ERR] Unhandled exception: Book with Id 1990 not found
System.Collections.Generic.KeyNotFoundException: Book with Id 1990 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 55
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:51:11.465 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/1990 - 404 null application/json; charset=utf-8 16.4751ms
2025-10-16 23:51:27.060 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/1 - null null
2025-10-16 23:51:27.062 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:51:27.062 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:51:27.063 +02:00 [INF] GetBookById called with id 1
2025-10-16 23:51:27.065 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:51:27.066 +02:00 [INF] Book 1, Ringenes Sverre retrieved successfully
2025-10-16 23:51:27.067 +02:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:51:27.068 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 4.6604ms
2025-10-16 23:51:27.068 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:51:27.069 +02:00 [INF] HTTP GET /api/Books/1 responded 200 in 7.2026 ms
2025-10-16 23:51:27.070 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/1 - 200 null application/json; charset=utf-8 9.8771ms
2025-10-16 23:51:34.783 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/1990 - null null
2025-10-16 23:51:34.785 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:51:34.785 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:51:34.787 +02:00 [INF] GetBookById called with id 1990
2025-10-16 23:51:34.788 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:51:34.790 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 3.1521ms
2025-10-16 23:51:34.790 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:51:34.791 +02:00 [ERR] HTTP GET /api/Books/1990 responded 500 in 6.2079 ms
System.Collections.Generic.KeyNotFoundException: Book with Id 1990 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 55
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-16 23:51:34.794 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Collections.Generic.KeyNotFoundException: Book with Id 1990 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 55
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:51:34.796 +02:00 [ERR] Unhandled exception: Book with Id 1990 not found
System.Collections.Generic.KeyNotFoundException: Book with Id 1990 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 55
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:51:34.799 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/1990 - 404 null application/json; charset=utf-8 15.74ms
2025-10-16 23:53:35.200 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/2 - null null
2025-10-16 23:53:35.202 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:35.203 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:53:35.204 +02:00 [INF] GetBookById called with id 2
2025-10-16 23:53:35.205 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:53:35.206 +02:00 [INF] Book 2, J retrieved successfully
2025-10-16 23:53:35.207 +02:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:53:35.208 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 4.2411ms
2025-10-16 23:53:35.208 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:35.209 +02:00 [INF] HTTP GET /api/Books/2 responded 200 in 7.2227 ms
2025-10-16 23:53:35.210 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/2 - 200 null application/json; charset=utf-8 9.5572ms
2025-10-16 23:53:37.441 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/3 - null null
2025-10-16 23:53:37.442 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:37.443 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:53:37.444 +02:00 [INF] GetBookById called with id 3
2025-10-16 23:53:37.445 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:53:37.446 +02:00 [INF] Book 3, Test the Book retrieved successfully
2025-10-16 23:53:37.447 +02:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:53:37.448 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 4.1368ms
2025-10-16 23:53:37.448 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:37.449 +02:00 [INF] HTTP GET /api/Books/3 responded 200 in 6.8715 ms
2025-10-16 23:53:37.450 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/3 - 200 null application/json; charset=utf-8 9.2143ms
2025-10-16 23:53:41.632 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/1 - null null
2025-10-16 23:53:41.634 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:41.634 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:53:41.635 +02:00 [INF] GetBookById called with id 1
2025-10-16 23:53:41.637 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:53:41.638 +02:00 [INF] Book 1, Ringenes Sverre retrieved successfully
2025-10-16 23:53:41.639 +02:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:53:41.640 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 4.3729ms
2025-10-16 23:53:41.640 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:41.641 +02:00 [INF] HTTP GET /api/Books/1 responded 200 in 7.2501 ms
2025-10-16 23:53:41.642 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/1 - 200 null application/json; charset=utf-8 9.6291ms
2025-10-16 23:53:43.452 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/2 - null null
2025-10-16 23:53:43.453 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:43.453 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:53:43.455 +02:00 [INF] GetBookById called with id 2
2025-10-16 23:53:43.456 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:53:43.457 +02:00 [INF] Book 2, J retrieved successfully
2025-10-16 23:53:43.458 +02:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:53:43.459 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 4.2682ms
2025-10-16 23:53:43.459 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:43.460 +02:00 [INF] HTTP GET /api/Books/2 responded 200 in 7.1104 ms
2025-10-16 23:53:43.461 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/2 - 200 null application/json; charset=utf-8 9.3836ms
2025-10-16 23:53:45.100 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/3 - null null
2025-10-16 23:53:45.101 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:45.102 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:53:45.103 +02:00 [INF] GetBookById called with id 3
2025-10-16 23:53:45.104 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:53:45.105 +02:00 [INF] Book 3, Test the Book retrieved successfully
2025-10-16 23:53:45.106 +02:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:53:45.107 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 4.2973ms
2025-10-16 23:53:45.108 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:45.109 +02:00 [INF] HTTP GET /api/Books/3 responded 200 in 7.9928 ms
2025-10-16 23:53:45.110 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/3 - 200 null application/json; charset=utf-8 10.5819ms
2025-10-16 23:53:46.393 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/4 - null null
2025-10-16 23:53:46.394 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:46.395 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:53:46.396 +02:00 [INF] GetBookById called with id 4
2025-10-16 23:53:46.398 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:53:46.399 +02:00 [INF] Book 4, Den mest populre boken retrieved successfully
2025-10-16 23:53:46.399 +02:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:53:46.400 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 4.1119ms
2025-10-16 23:53:46.401 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:46.401 +02:00 [INF] HTTP GET /api/Books/4 responded 200 in 6.8700 ms
2025-10-16 23:53:46.402 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/4 - 200 null application/json; charset=utf-8 9.1685ms
2025-10-16 23:53:47.854 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/5 - null null
2025-10-16 23:53:47.856 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:47.856 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:53:47.858 +02:00 [INF] GetBookById called with id 5
2025-10-16 23:53:47.859 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:53:47.860 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 2.9334ms
2025-10-16 23:53:47.861 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:47.862 +02:00 [ERR] HTTP GET /api/Books/5 responded 500 in 6.0203 ms
System.Collections.Generic.KeyNotFoundException: Book with Id 5 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 55
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-16 23:53:47.866 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Collections.Generic.KeyNotFoundException: Book with Id 5 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 55
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:53:47.869 +02:00 [ERR] Unhandled exception: Book with Id 5 not found
System.Collections.Generic.KeyNotFoundException: Book with Id 5 not found
   at FredrikMageeEmne7Arbkrav.Services.BooksService.GetBookByIdAsync(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 55
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById(Int32 bookId) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:53:47.872 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/5 - 404 null application/json; charset=utf-8 18.0701ms
2025-10-16 23:53:53.801 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5031/api/Books/2 - application/json 108
2025-10-16 23:53:53.802 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:53.805 +02:00 [INF] Route matched with {action = "UpdateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateBook(Int32, FredrikMageeEmne7Arbkrav.DTOs.UpdateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:53:53.810 +02:00 [INF] UpdateBook called with UpdateBookRequest {"Title":"string","Author":"string","PublicationYear":2025,"ISBN":"string","InStock":0,"$type":"UpdateBookRequest"}
2025-10-16 23:53:53.813 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:53:53.821 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 6), @p1='?' (Size = 6), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Books" SET "Author" = @p0, "ISBN" = @p1, "InStock" = @p2, "PublicationYear" = @p3, "Title" = @p4
WHERE "Id" = @p5
RETURNING 1;
2025-10-16 23:53:53.825 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-10-16 23:53:53.825 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav) in 19.6005ms
2025-10-16 23:53:53.826 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:53:53.827 +02:00 [INF] HTTP PUT /api/Books/2 responded 204 in 24.6178 ms
2025-10-16 23:53:53.828 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5031/api/Books/2 - 204 null null 26.9213ms
2025-10-16 23:54:43.787 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5031/api/Books/2 - application/json 106
2025-10-16 23:54:43.788 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:54:43.789 +02:00 [INF] Route matched with {action = "UpdateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateBook(Int32, FredrikMageeEmne7Arbkrav.DTOs.UpdateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:54:43.790 +02:00 [INF] UpdateBook called with UpdateBookRequest {"Title":"Boken","Author":"Forfatteren Forfatternavn","PublicationYear":2000,"ISBN":null,"InStock":2,"$type":"UpdateBookRequest"}
2025-10-16 23:54:43.793 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:54:43.795 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 25), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Books" SET "Author" = @p0, "InStock" = @p1, "PublicationYear" = @p2, "Title" = @p3
WHERE "Id" = @p4
RETURNING 1;
2025-10-16 23:54:43.797 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-10-16 23:54:43.798 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav) in 7.7232ms
2025-10-16 23:54:43.798 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:54:43.799 +02:00 [INF] HTTP PUT /api/Books/2 responded 204 in 10.4866 ms
2025-10-16 23:54:43.800 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5031/api/Books/2 - 204 null null 13.0797ms
2025-10-16 23:55:07.525 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/2 - null null
2025-10-16 23:55:07.526 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:55:07.527 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:55:07.528 +02:00 [INF] GetBookById called with id 2
2025-10-16 23:55:07.529 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:55:07.530 +02:00 [INF] Book 2, Boken retrieved successfully
2025-10-16 23:55:07.531 +02:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:55:07.532 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 4.1414ms
2025-10-16 23:55:07.532 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:55:07.533 +02:00 [INF] HTTP GET /api/Books/2 responded 200 in 7.0087 ms
2025-10-16 23:55:07.534 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/2 - 200 null application/json; charset=utf-8 9.313ms
2025-10-16 23:55:22.209 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5031/api/Books/2 - application/json 68
2025-10-16 23:55:22.210 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:55:22.211 +02:00 [INF] Route matched with {action = "UpdateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateBook(Int32, FredrikMageeEmne7Arbkrav.DTOs.UpdateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:55:22.212 +02:00 [INF] UpdateBook called with UpdateBookRequest {"Title":null,"Author":null,"PublicationYear":2000,"ISBN":"BESTBOK31","InStock":0,"$type":"UpdateBookRequest"}
2025-10-16 23:55:22.215 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:55:22.218 +02:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 9), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Books" SET "ISBN" = @p0, "InStock" = @p1
WHERE "Id" = @p2
RETURNING 1;
2025-10-16 23:55:22.224 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'FredrikMageeEmne7Arbkrav.Data.BookDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-16 23:55:22.228 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav) in 16.484ms
2025-10-16 23:55:22.229 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:55:22.230 +02:00 [ERR] HTTP PUT /api/Books/2 responded 500 in 19.4171 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.SaveChangesAsync() in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 87
   at FredrikMageeEmne7Arbkrav.Services.BooksService.UpdateBookAsync(Int32 bookId, UpdateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 133
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook(Int32 bookId, UpdateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 93
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-16 23:55:22.236 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.SaveChangesAsync() in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 87
   at FredrikMageeEmne7Arbkrav.Services.BooksService.UpdateBookAsync(Int32 bookId, UpdateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 133
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook(Int32 bookId, UpdateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 93
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:55:22.240 +02:00 [ERR] Unhandled exception: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.SaveChangesAsync() in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 87
   at FredrikMageeEmne7Arbkrav.Services.BooksService.UpdateBookAsync(Int32 bookId, UpdateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 133
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook(Int32 bookId, UpdateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 93
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:55:22.245 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5031/api/Books/2 - 409 null application/json; charset=utf-8 36.6305ms
2025-10-16 23:55:30.516 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5031/api/Books/2 - application/json 69
2025-10-16 23:55:30.517 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:55:30.517 +02:00 [INF] Route matched with {action = "UpdateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateBook(Int32, FredrikMageeEmne7Arbkrav.DTOs.UpdateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:55:30.519 +02:00 [INF] UpdateBook called with UpdateBookRequest {"Title":null,"Author":null,"PublicationYear":2000,"ISBN":"BESTBOK31","InStock":22,"$type":"UpdateBookRequest"}
2025-10-16 23:55:30.522 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:55:30.523 +02:00 [ERR] Failed executing DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 9), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Books" SET "ISBN" = @p0, "InStock" = @p1
WHERE "Id" = @p2
RETURNING 1;
2025-10-16 23:55:30.525 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'FredrikMageeEmne7Arbkrav.Data.BookDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-16 23:55:30.528 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav) in 10.1046ms
2025-10-16 23:55:30.529 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:55:30.530 +02:00 [ERR] HTTP PUT /api/Books/2 responded 500 in 12.7811 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.SaveChangesAsync() in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 87
   at FredrikMageeEmne7Arbkrav.Services.BooksService.UpdateBookAsync(Int32 bookId, UpdateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 133
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook(Int32 bookId, UpdateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 93
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-16 23:55:30.536 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.SaveChangesAsync() in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 87
   at FredrikMageeEmne7Arbkrav.Services.BooksService.UpdateBookAsync(Int32 bookId, UpdateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 133
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook(Int32 bookId, UpdateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 93
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:55:30.540 +02:00 [ERR] Unhandled exception: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'UNIQUE constraint failed: Books.ISBN'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at FredrikMageeEmne7Arbkrav.Repositories.BookRepository.SaveChangesAsync() in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Repositories\BookRepository.cs:line 87
   at FredrikMageeEmne7Arbkrav.Services.BooksService.UpdateBookAsync(Int32 bookId, UpdateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Services\BooksService.cs:line 133
   at FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook(Int32 bookId, UpdateBookRequest request) in C:\Users\fredr\Skole\Skoleprosjekt\FredrikMageeEmne7Arbkrav\FredrikMageeEmne7Arbkrav\Controllers\BooksController.cs:line 93
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-16 23:55:30.546 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5031/api/Books/2 - 409 null application/json; charset=utf-8 30.394ms
2025-10-16 23:55:41.837 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5031/api/Books/2 - application/json 73
2025-10-16 23:55:41.838 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:55:41.839 +02:00 [INF] Route matched with {action = "UpdateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateBook(Int32, FredrikMageeEmne7Arbkrav.DTOs.UpdateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:55:41.841 +02:00 [INF] UpdateBook called with UpdateBookRequest {"Title":null,"Author":null,"PublicationYear":2000,"ISBN":"19-200-17-873","InStock":22,"$type":"UpdateBookRequest"}
2025-10-16 23:55:41.843 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:55:41.845 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 13), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Books" SET "ISBN" = @p0, "InStock" = @p1
WHERE "Id" = @p2
RETURNING 1;
2025-10-16 23:55:41.847 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-10-16 23:55:41.847 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav) in 7.0974ms
2025-10-16 23:55:41.848 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:55:41.848 +02:00 [INF] HTTP PUT /api/Books/2 responded 204 in 9.8513 ms
2025-10-16 23:55:41.849 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5031/api/Books/2 - 204 null null 12.1204ms
2025-10-16 23:55:52.012 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5031/api/Books/2 - application/json 71
2025-10-16 23:55:52.013 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:55:52.014 +02:00 [INF] Route matched with {action = "UpdateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateBook(Int32, FredrikMageeEmne7Arbkrav.DTOs.UpdateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:55:52.015 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-16 23:55:52.016 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav) in 1.0667ms
2025-10-16 23:55:52.017 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:55:52.017 +02:00 [INF] HTTP PUT /api/Books/2 responded 400 in 3.8860 ms
2025-10-16 23:55:52.018 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5031/api/Books/2 - 400 null application/problem+json; charset=utf-8 6.1416ms
2025-10-16 23:56:04.893 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5031/api/Books/2 - application/json 102
2025-10-16 23:56:04.895 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:56:04.896 +02:00 [INF] Route matched with {action = "UpdateBook", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateBook(Int32, FredrikMageeEmne7Arbkrav.DTOs.UpdateBookRequest) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:56:04.897 +02:00 [INF] UpdateBook called with UpdateBookRequest {"Title":"","Author":"string","PublicationYear":2025,"ISBN":"string","InStock":0,"$type":"UpdateBookRequest"}
2025-10-16 23:56:04.900 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:56:04.901 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 6), @p1='?' (Size = 6), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Books" SET "Author" = @p0, "ISBN" = @p1, "InStock" = @p2, "PublicationYear" = @p3, "Title" = @p4
WHERE "Id" = @p5
RETURNING 1;
2025-10-16 23:56:04.904 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-10-16 23:56:04.904 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav) in 7.6685ms
2025-10-16 23:56:04.905 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.UpdateBook (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:56:04.905 +02:00 [INF] HTTP PUT /api/Books/2 responded 204 in 10.3814 ms
2025-10-16 23:56:04.906 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5031/api/Books/2 - 204 null null 13.1002ms
2025-10-16 23:56:18.990 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5031/api/Books/2 - null null
2025-10-16 23:56:18.992 +02:00 [INF] Executing endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:56:18.992 +02:00 [INF] Route matched with {action = "GetBookById", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookById(Int32) on controller FredrikMageeEmne7Arbkrav.Controllers.BooksController (FredrikMageeEmne7Arbkrav).
2025-10-16 23:56:18.993 +02:00 [INF] GetBookById called with id 2
2025-10-16 23:56:18.994 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "b"."Id", "b"."Author", "b"."ISBN", "b"."InStock", "b"."PublicationYear", "b"."Title"
FROM "Books" AS "b"
WHERE "b"."Id" = @__p_0
LIMIT 1
2025-10-16 23:56:18.996 +02:00 [INF] Book 2,  retrieved successfully
2025-10-16 23:56:18.996 +02:00 [INF] Executing OkObjectResult, writing value of type 'FredrikMageeEmne7Arbkrav.DTOs.Response.BookResponse'.
2025-10-16 23:56:18.997 +02:00 [INF] Executed action FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav) in 3.7282ms
2025-10-16 23:56:18.998 +02:00 [INF] Executed endpoint 'FredrikMageeEmne7Arbkrav.Controllers.BooksController.GetBookById (FredrikMageeEmne7Arbkrav)'
2025-10-16 23:56:18.998 +02:00 [INF] HTTP GET /api/Books/2 responded 200 in 6.4680 ms
2025-10-16 23:56:18.999 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5031/api/Books/2 - 200 null application/json; charset=utf-8 8.7291ms
